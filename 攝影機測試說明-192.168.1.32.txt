========================================
    攝影機 192.168.1.32:554 測試說明
========================================

🎯 測試目標（根據Agent DVR設定）
攝影機IP: 192.168.1.32:554
RTSP串流: rtsp://192.168.1.32:554/stream1?username=admin&password=
認證資訊: admin/空密碼

📋 測試方法

方法一：批次腳本測試
1. 確保系統正在運行 (http://localhost:3000)
2. 雙擊執行: test-camera-192.168.1.32.bat
3. 查看測試結果

方法二：Node.js腳本測試
1. 確保系統正在運行
2. 執行命令: npm run test-camera
3. 查看詳細測試結果

方法三：網頁測試頁面
1. 確保系統正在運行
2. 打開瀏覽器訪問: http://localhost:3000/test-camera-stream.html
3. 點擊「連接攝影機」按鈕
4. 點擊「開始串流」按鈕
5. 查看即時影像播放

🔧 測試項目

1. 網路連接測試
   - 檢查攝影機 192.168.1.32:554 是否可達
   - 測試RTSP端口554是否開放

2. ONVIF連接測試
   - 測試ONVIF協議支援
   - 使用 admin/空密碼 認證
   - 獲取攝影機配置檔和串流資訊

3. 快照功能測試
   - 拍攝即時快照
   - 保存到 public/snapshots/ 目錄

4. 串流功能測試
   - 啟動RTSP串流（來源：192.168.1.32:554）
   - 轉換為HLS格式（使用FFmpeg）
   - 生成播放列表

5. 影像播放測試
   - 在瀏覽器中播放串流
   - 測試HLS.js播放器

📁 相關檔案

測試腳本:
- test-camera-192.168.1.32.bat (批次腳本)
- test-camera-node.js (Node.js腳本)

測試頁面:
- test-camera-stream.html (網頁測試頁面)

📊 預期結果

成功情況:
✅ 網路連接正常 (ping 192.168.1.32 成功)
✅ ONVIF連接成功 (端口554響應)
✅ 認證成功 (admin/空密碼)
✅ 獲取RTSP串流URL
✅ 快照拍攝成功
✅ FFmpeg轉換RTSP為HLS成功
✅ 瀏覽器播放HLS串流成功

失敗情況分析:
❌ 網路連接失敗 - 檢查IP 192.168.1.32 和網路
❌ 端口554無響應 - 檢查攝影機RTSP服務
❌ 認證失敗 - 確認攝影機設定（可能需要密碼）
❌ ONVIF不支援 - 某些攝影機只支援RTSP，不支援ONVIF
❌ 串流失敗 - 檢查FFmpeg安裝和RTSP URL格式
❌ 播放失敗 - 檢查瀏覽器和HLS.js支援

🛠️ 故障排除

1. 如果網路連接失敗:
   - 確認攝影機IP: 192.168.1.32
   - 檢查攝影機是否在同一網段
   - 確認攝影機電源和網路連接

2. 如果ONVIF連接失敗:
   - 嘗試直接使用RTSP URL測試
   - 檢查攝影機是否支援ONVIF協議
   - 確認端口554是否正確

3. 如果認證失敗:
   - 確認密碼確實為空
   - 嘗試常見密碼: 12345, password, 123456
   - 檢查攝影機管理界面設定

4. 如果串流失敗:
   - 確認FFmpeg已安裝: npm run install-ffmpeg
   - 測試RTSP URL: rtsp://192.168.1.32:554/stream1?username=admin&password=
   - 檢查防火牆設定

5. 如果播放失敗:
   - 使用Chrome或Firefox瀏覽器
   - 檢查HLS.js是否正確載入
   - 確認生成的.m3u8檔案

🔗 Agent DVR資訊整合

根據您的Agent DVR設定:
- 發現的ONVIF服務: http://192.168.1.32/onvif/device_service
- 即時串流URL: rtsp://192.168.1.32:554/stream1?username=admin&password=
- 記錄串流URL: rtsp://192.168.1.32:554/stream1?username=admin&password=
- 解析度: 640x360

🎉 成功後的操作

1. 訪問攝影機管理頁面:
   http://localhost:3000/onvif-cameras

2. 查看攝影機狀態和即時串流

3. 使用批量連接功能連接其他類似攝影機

4. 設定影像輪播和監控功能

⚠️ 注意事項

- 這台攝影機使用RTSP端口554，不是標準HTTP端口80
- 認證使用空密碼，這在某些環境下可能有安全風險
- Agent DVR已確認此攝影機的串流格式和參數
- 確保網路環境允許RTSP協議通信

========================================
