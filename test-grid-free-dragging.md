# 網格拖動優化說明

## 修改目標

優化編輯模式下的拖動體驗，讓感測器和設備的拖動更加順暢，不受網格限制。

## 主要修改

### 1. 編輯模式下的網格顯示邏輯

**修改前**：
- 進入編輯模式時顯示網格 (`gridOverlay.classList.add('show')`)
- 拖動時網格會干擾視覺，影響拖動體驗

**修改後**：
- 進入編輯模式時隱藏網格 (`gridOverlay.classList.remove('show')`)
- 退出編輯模式時顯示網格 (`gridOverlay.classList.add('show')`)

### 2. 拖動處理優化

**修改前**：
- 支援 Shift 鍵網格對齊功能
- 網格大小為 5%，會強制對齊到網格點

**修改後**：
- 移除網格對齊功能
- 拖動更加自由，可以精確定位到任意位置

### 3. 使用者介面提示

**修改前**：
```
編輯模式：拖動設備調整位置，按住 Shift 鍵網格對齊
```

**修改後**：
```
編輯模式：拖動設備調整位置，拖動更順暢
```

## 修改的檔案

- `views/farm-detail.hbs` - 前端佈局和拖動邏輯

## 修改的函數

### `toggleEditMode()`
- 編輯模式下隱藏網格
- 退出編輯模式時顯示網格

### `handleMouseMove()`
- 移除網格對齊邏輯
- 拖動更加自由

### `handleMouseUp()`
- 移除網格相關的狀態清理

## 預期效果

1. **拖動更順暢**: 編輯模式下沒有網格干擾，拖動感測器和設備更加順暢
2. **精確定位**: 可以將設備拖動到任意位置，不受網格限制
3. **視覺清晰**: 編輯時沒有網格線條，佈局圖更清晰
4. **保持功能**: 非編輯模式下仍然顯示網格，便於查看佈局

## 使用方式

1. 點擊「編輯模式」按鈕進入編輯狀態
2. 網格會自動隱藏，拖動更加順暢
3. 拖動感測器或設備到任意位置
4. 點擊「退出編輯」或「儲存佈局」退出編輯模式
5. 網格會重新顯示，便於查看佈局效果

## 注意事項

1. **網格對齊功能已移除**: 如果需要網格對齊，可以重新添加相關邏輯
2. **拖動精度**: 拖動精度取決於滑鼠移動的解析度
3. **向後相容**: 現有的佈局資料不受影響
4. **效能提升**: 移除網格計算，拖動效能有所提升

## 未來改進

如果需要網格對齊功能，可以考慮：

1. 添加一個「網格對齊」開關按鈕
2. 支援可配置的網格大小
3. 在拖動時顯示網格線條作為參考
4. 支援鍵盤快捷鍵切換網格模式
